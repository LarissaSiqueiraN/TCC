<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<div class="dashboard" id="analysisDashboard">
  <div class="dashboard-header">
    <h2 class="dashboard-title">Nova Análise</h2>
    <div>
      <button class="btn btn-primary" id="btnSave" onclick="saveAnalysis()">
        <i class="fas fa-save"></i> Salvar
      </button>
    </div>
  </div>

  <div class="sample-info">
    <h3>Informações da Análise</h3>
    <div class="form-group">
      <label for="project-name">Nome da Análise</label>
      <input type="text" id="project-name" placeholder="Ex: Espectro UV-Vis Amostra A" />
    </div>
    <div class="form-group">
      <label for="project-description">Descrição</label>
      <textarea id="project-description" rows="3"
        placeholder="Detalhes sobre a análise, condições experimentais..."></textarea>
    </div>
  </div>

  <!-- <div class="graph-controls">
    <div class="control-group">
      <label for="nm-input">Comprimento de Onda (nm)</label>
      <input type="text" id="nm-input" placeholder="Ex: 400,401,402" />
    </div>
    <div class="control-group">
      <label for="abs-input">Absorbância (Abs)</label>
      <input type="text" id="abs-input" placeholder="Ex: 0.1,0.12,0.15" />
    </div>
    <div class="control-group">
      <label for="graph-type">Tipo de Gráfico</label>
      <select id="graph-type">
        <option value="line">Linha</option>
      </select>
    </div>
  </div>
</div> -->

<div class="line-controls">
    <div class="manual-add-section">
        <h3>Adicionar Linha</h3>
        <p>Carregue um arquivo principal primeiro para definir o Eixo X.</p>
        <div class="form-group">
            <input type="text" id="new-line-name" placeholder="Nome da Amostra/Linha">
        </div>
        <!-- <div class="form-group">
            <textarea id="new-line-data" rows="3" placeholder="Cole os valores de Y separados por ponto e vírgula (;)"></textarea>
        </div> -->
        <!-- Container para os botões de adicionar linha -->
        <div class="add-line-buttons">
            <!-- <button id="btn-add-line" class="btn btn-outline">
                <i class="fas fa-plus"></i> Adicionar Manualmente
            </button> -->
            <button id="btn-add-line-file" class="btn btn-outline">
                <i class="fas fa-file-upload"></i> Adicionar por Arquivo
            </button>
            <!-- Input de arquivo escondido para a nova linha -->
            <input type="file" id="add-line-file-input" accept=".csv, .xlsx, .xls" style="display: none;">
        </div>
    </div>
    <div id="line-legend-container" class="editable-legend">
        <h4>Legenda Editável</h4>
        <!-- As legendas com seletores de cor serão inseridas aqui pelo JavaScript -->
    </div>
</div>
<div class="graph-container">
  <!-- placeholder que você pode esconder quando o gráfico for renderizado -->
  <div class="graph-placeholder" id="placeholder">
    <i class="fas fa-chart-area"></i>
    <p>Selecione um tipo de gráfico e carregue os dados para visualização</p>
    <button class="btn btn-primary" id="btnUpload" style="padding: 0.8rem 2rem; margin-top: 1rem">
      <i class="fas fa-upload"></i> Carregar Dados
    </button>
    <input type="file" id="fileInput" accept=".csv, .xlsx, .xls" style="display: none;">
  </div>

  <!-- canvas para o Chart.js -->
  <canvas id="uvVisChart" style="display:none;"></canvas>
</div>


<div class="action-buttons">
  <button class="btn btn-outline" onclick="resetAnalysis()">
    <i class="fas fa-redo"></i> Redefinir
  </button>
  <button class="btn btn-outline" id="togglePointsBtn">
    <i class="fas fa-search-plus"></i> Mostrar Bandas
  </button>
</div>